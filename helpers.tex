\newif\ifisdraft
\isdraftfalse
\newcommand{\isdraft}{\ifisdraft true\else false\fi}
\newcommand{\todo}[1]{
  \ifisdraft {
    \Large
    $\color{black}\star$\color{red}~\textit{#1}\color{black}~$\star$
  } \fi
}

% Used in advected_subdomain.tex
\definecolor{advectionColor}{RGB}{213,94,0}   % vermillion / orange
\definecolor{diffusionColor}{RGB}{0,114,178}  % blue

\definecolor{powderColor}{rgb}{0.878,0.859,0.811}
\definecolor{metalColor}{rgb}{0.420,0.408,0.384}
\newcommand{\legendpowderbulk}{%
  \begin{tabular}{rlrl}
     ({\color{powderColor} \rule[-1.5 pt]{8 pt}{8 pt}}) & Powder & ({\color{metalColor} \rule[-1.5 pt]{8 pt}{8 pt}})  & Bulk
  \end{tabular}
}
\newcommand{\wireframeTriangle}{%
    \begin{tikzpicture}[scale=0.2] % adjust scale as needed
      % Bottom triangle
      \draw[]
        (0,0) coordinate (A)
        -- (0,1) coordinate (B)
        -- (1,0) coordinate (C)
        -- cycle;
      % Upper triangle
      \draw[]
        (0,1) coordinate (D)
        -- (1,1) coordinate (E)
        -- (1,0) coordinate (F);
    \end{tikzpicture}
}

\newcommand{\playthumb}[2][]{%
  \begin{tikzpicture}
    % Thumbnail image
    \node[inner sep=0] (img) {\includegraphics[#1]{#2}};
    % Dark circle
    \draw[fill=black!60, draw=white, line width=0.8pt]
      (img.center) circle[radius=0.6cm];
    % Triangle
    \draw[fill=white, draw=none, rounded corners=1.5pt]
      ([xshift=0.34cm]img.center) --
      ([xshift=-0.19cm,yshift=0.3cm]img.center) --
      ([xshift=-0.19cm,yshift=-0.3cm]img.center) -- cycle;
  \end{tikzpicture}%
}

\newcounter{video}
\renewcommand{\thevideo}{Video \arabic{video}}
\newcommand{\videoCaption}[1]{%
  \captionof{video}{#1}%
}

\newcommand{\externalvod}[3]{\movie[externalviewer]{\playthumb[#1]{#3}}{#2}}
\newcommand{\seudoembeddedvod}[3]{\movie[poster, showcontrols]{\playthumb[#1]{#3}}{#2}}

\DeclareRobustCommand{\labelbox}[2][]{%
  % Inline TikZ node; safe in text, math, tabular, makebox, etc.
  \tikz[baseline=(X.base)]\node[annotate box,#1] (X) {#2};%
}
\newcommand{\support}[1]{\text{supp}\left(#1\right)}
\newcommand{\nablaxi}[0]{\nabla_{\boldsymbol{\xi}}}
\newcommand{\deltaxi}[0]{\Delta_{\boldsymbol{\xi}}}
\newcommand{\eunorm}[1]{
  \text{\Large$|\hspace{-0.8mm}|$}\; #1 \;\text{\Large$|\hspace{-0.8mm}|_{\scriptscriptstyle{2}}$}
}

\input{paraview-colorbars.tex}

\pgfplotsset{
  convplotstyle/.style={
    clip=true,
    xlabel={$\Delta t_{f} [T_{hs}]$},
    ylabel={$||u_h - u_{ex}||_2$},
    grid=major,
    xtick={1,0.5,0.25,0.125,0.0625},
    xticklabels={$1$,$\tfrac{1}{2}$,$\tfrac{1}{4}$,$\tfrac{1}{8}$,$\tfrac{1}{16}$},
    x dir=reverse,
    scale only axis,
  },
  oscillationstyle/.style={
    clip=true,
    enlargelimits=false,
    ymin=25.0,
    ymax=2400.0,
    grid=major,
    ytick={25,400,900,1300,1625,1900,2300},
    cycle list={
      {blue,solid},
      {red,solid},
      {brown,solid},
      {blue,  densely dashdotted},
      {red,   densely dashdotted},
      {brown, densely dashdotted}
    },
    xlabel={$x$},
    x unit=\si{\mm},
    ylabel={$T$},
    y unit=\si{\celsius},
    legend cell align=left,
    legend image post style={xscale=0.8},
    %legend style={draw=none, fill=none, font=\small},
    legend style={font=\footnotesize},
    tick label style={font=\footnotesize},
    ylabel style={font=\footnotesize},
    xlabel style={font=\footnotesize},
  },
  uhnstyle/.style={mark=none, thick, blue},
  uhnpstyle/.style={mark=none, thick, purple},
  substepstyle/.style={mark=none, thick, black},
  correctstyle/.style={mark=none, thick, green, dashdotted},
  truncatedddstyle/.style={
    clip=true,
    enlargelimits=false,
    ymin=25.0,
    ymax=2400.0,
    xmin=-1.0,
    xmax=0.6,
    grid=major,
    ytick={25,400,900,1300,1900,2300},
    xlabel={$x$},
    x unit=\si{\mm},
    ylabel={$T$},
    ylabel style={at={(axis description cs:-0.2,1.03)}, anchor=south, rotate=-90},
    y unit=\si{\celsius},
    legend cell align=left,
    legend image post style={xscale=0.8},
    %legend style={draw=none, fill=none, font=\small},
    trim axis left,
    scale only axis,
    legend style={font=\footnotesize, text opacity=1.0, fill opacity=0.6},
  },
  meltpoolstyle/.style={
    width=1.0\linewidth,
    grid=major,
    legend cell align=left,
    legend style={font=\footnotesize},
    tick label style={font=\footnotesize},
    cycle list name=color list,
    unit vector ratio=1 1,
    extra x ticks={50},
    extra x tick labels={},
  },
  powderStyle/.style={black, thick, mark=square},
  bulkStyle/.style={blue, thick, mark=diamond}
}

\newcommand{\gammafs}{
  \pgfkeysgetvalue{/pgfplots/ymin}\myymin
  \pgfkeysgetvalue{/pgfplots/ymax}\myymax
  \draw[densely dashed, very thin] (-0.15313, \myymin) -- (-0.15313, \myymax)
    node [pos=0.2, anchor=east] {$\Gamma_{fs}$};
}
